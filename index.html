<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Couple Photobooth üíï</title>

<!-- Font Lucu -->
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  padding: 20px;
  text-align: center;
  background: linear-gradient(135deg,#ff9a9e,#fad0c4);
  font-family: Arial, sans-serif;
}

h2 {
  font-family: 'Pacifico', cursive;
  color: white;
}

.booth {
  background: white;
  max-width: 320px;
  margin: auto;
  padding: 15px;
  border-radius: 25px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.25);
}

video {
  width: 100%;
  aspect-ratio: 3/4;
  object-fit: cover;
  border-radius: 20px;
  background: black;
}

input {
  width: 90%;
  padding: 8px;
  margin: 10px 0;
  border-radius: 20px;
  border: 1px solid #ccc;
  text-align: center;
}

button {
  padding: 10px 20px;
  margin-top: 8px;
  border: none;
  border-radius: 25px;
  background: #ff69b4;
  color: white;
  font-size: 15px;
  cursor: pointer;
}

#download { display:none; }

canvas { display:none; }
</style>
</head>

<body>

<h2>Couple Photobooth üíï</h2>

<div class="booth">
  <video id="video" autoplay playsinline></video>
  <input id="nameInput" placeholder="Nama Couple üíë">
  <button id="capture">üì∏ Ambil Foto</button>
  <button id="download">‚¨áÔ∏è Download Strip</button>
  <canvas id="canvas"></canvas>
</div>

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const captureBtn = document.getElementById("capture");
const downloadBtn = document.getElementById("download");
const nameInput = document.getElementById("nameInput");

let photos = [];

// Kamera
navigator.mediaDevices.getUserMedia({
  video: { facingMode: "user" },
  audio: false
}).then(stream => {
  video.srcObject = stream;
});

// Ambil foto satu per klik
captureBtn.onclick = () => {
  if (photos.length >= 3) return;

  const temp = document.createElement("canvas");
  temp.width = video.videoWidth;
  temp.height = video.videoHeight;
  temp.getContext("2d").drawImage(video,0,0);
  photos.push(temp);

  if (photos.length === 3) {
    createStrip();
    downloadBtn.style.display = "inline-block";
  }
};

function createStrip() {
  const stripWidth = 900;
  const stripHeight = 1500;

  canvas.width = stripWidth;
  canvas.height = stripHeight;

  // background lucu
  ctx.fillStyle = "#ffe4ec";
  ctx.fillRect(0,0,stripWidth,stripHeight);

  // dekor
  ctx.font = "50px Pacifico";
  ctx.fillText("üíñ ‚ú® üíñ", 260, 60);

  // foto
  let y = 100;
  photos.forEach(p => {
    ctx.drawImage(p, 150, y, 600, 450);
    y += 470;
  });

  // nama & tanggal
  const name = nameInput.value || "Couple üíë";
  const date = new Date().toLocaleDateString("id-ID");

  ctx.fillStyle = "#ff69b4";
  ctx.font = "40px Pacifico";
  ctx.textAlign = "center";
  ctx.fillText(name, stripWidth/2, stripHeight - 80);

  ctx.font = "24px Arial";
  ctx.fillText(date, stripWidth/2, stripHeight - 40);
}

// Download
downloadBtn.onclick = () => {
  const link = document.createElement("a");
  link.download = "photobooth-strip.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
};
</script>

</body>
</html>

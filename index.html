<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Couple Photobooth üíï</title>

<!-- Font Lucu -->
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  padding: 20px;
  text-align: center;
  font-family: Arial, sans-serif;

  /* BACKGROUND PINK + GARIS KOTAK */
  background-color: #ffc1d9;
  background-image:
    linear-gradient(#ffffff55 2px, transparent 2px),
    linear-gradient(90deg, #ffffff55 2px, transparent 2px);
  background-size: 40px 40px;
}

h2 {
  font-family: 'Pacifico', cursive;
  color: white;
  margin-bottom: 10px;
}

.booth {
  background: white;
  max-width: 340px;
  margin: auto;
  padding: 15px;
  border-radius: 25px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.25);
}

video {
  width: 100%;
  aspect-ratio: 3/4;
  object-fit: cover;
  border-radius: 20px;
  background: black;
}

input {
  width: 90%;
  padding: 8px;
  margin: 10px 0;
  border-radius: 20px;
  border: 1px solid #ccc;
  text-align: center;
}

button {
  padding: 10px 20px;
  margin-top: 8px;
  border: none;
  border-radius: 25px;
  background: #ff5fa2;
  color: white;
  font-size: 15px;
  cursor: pointer;
}

#download { display:none; }
canvas { display:none; }
</style>
</head>

<body>

<h2>Couple Photobooth üíï</h2>

<div class="booth">
  <video id="video" autoplay playsinline></video>
  <input id="nameInput" placeholder="Nama Couple üíë">
  <button id="capture">üì∏ Ambil Foto</button>
  <button id="download">‚¨áÔ∏è Download Strip</button>
  <canvas id="canvas"></canvas>
</div>

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const captureBtn = document.getElementById("capture");
const downloadBtn = document.getElementById("download");
const nameInput = document.getElementById("nameInput");

let photos = [];

// Aktifkan kamera
navigator.mediaDevices.getUserMedia({
  video: { facingMode: "user" },
  audio: false
}).then(stream => {
  video.srcObject = stream;
});

// Ambil foto per klik
captureBtn.onclick = () => {
  if (photos.length >= 3) return;

  const temp = document.createElement("canvas");
  temp.width = video.videoWidth;
  temp.height = video.videoHeight;
  temp.getContext("2d").drawImage(video,0,0);
  photos.push(temp);

  if (photos.length === 3) {
    createStrip();
    downloadBtn.style.display = "inline-block";
  }
};

function drawGridBackground() {
  ctx.fillStyle = "#ffc1d9";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.strokeStyle = "rgba(255,255,255,0.35)";
  ctx.lineWidth = 2;

  for (let x = 0; x < canvas.width; x += 40) {
    ctx.beginPath();
    ctx.moveTo(x,0);
    ctx.lineTo(x,canvas.height);
    ctx.stroke();
  }

  for (let y = 0; y < canvas.height; y += 40) {
    ctx.beginPath();
    ctx.moveTo(0,y);
    ctx.lineTo(canvas.width,y);
    ctx.stroke();
  }
}

function createStrip() {
  const stripWidth = 900;
  const photoWidth = 600;
  const photoHeight = 450;
  const gap = 40;

  canvas.width = stripWidth;
  canvas.height = 100 + (photoHeight + gap) * 3 + 160;

  // Background kotak-kotak
  drawGridBackground();

  // Elemen lucu atas
  ctx.font = "48px Pacifico";
  ctx.textAlign = "center";
  ctx.fillStyle = "#ff3d8b";
  ctx.fillText("üíñ ‚ú® üíñ ‚ú® üíñ", canvas.width/2, 70);

  let y = 100;

  photos.forEach(p => {
    // Frame putih
    ctx.fillStyle = "white";
    ctx.fillRect(
      (stripWidth-photoWidth)/2 - 15,
      y - 15,
      photoWidth + 30,
      photoHeight + 30
    );

    // Foto
    ctx.drawImage(
      p,
      (stripWidth-photoWidth)/2,
      y,
      photoWidth,
      photoHeight
    );

    y += photoHeight + gap;
  });

  // Nama & tanggal
  const name = nameInput.value || "Couple üíë";
  const date = new Date().toLocaleDateString("id-ID");

  ctx.fillStyle = "#ff3d8b";
  ctx.font = "42px Pacifico";
  ctx.fillText(name, canvas.width/2, canvas.height - 90);

  ctx.font = "24px Arial";
  ctx.fillText(date, canvas.width/2, canvas.height - 50);
}

// Download
downloadBtn.onclick = () => {
  const link = document.createElement("a");
  link.download = "photobooth-couple-strip.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
};
</script>

</body>
</html>
